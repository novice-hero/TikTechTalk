# 프로세스 / 스레드

## 프로세스

---

프로세스란 운영체제로부터 자원을 할당받은 **작업의 단위**를 의미한다. 즉, 프로그램이 실행되어 작업 중인 상태에 있다면 그것은 프로세스라고 할 수 있다.

## 스레드

---

스레드란 프로세스가 할당받은 자원을 이용하는 **실행 흐름의 단위**를 의미한다. 하나의 프로세스는 반드시 하나 이상의 스레드를 갖는다.

## 프로세스 vs 스레드

---

프로세스는 각각 별도의 주소공간 할당

- Code : 코드 자체를 구성하는 메모리 영역(프로그램 명령)
- Data : 전역변수, 정적변수, 배열 등
    - 초기화 된 데이터는 data 영역에 저장
    - 초기화 되지 않은 데이터는 bss 영역에 저장
- Heap : 동적 할당되는 데이터를 위한 공간
- Stack : 지역변수, 매개변수, 리턴 값 (임시 메모리 영역)

스레드는 Stack만 따로 할당 받고 나머지 영역은 서로 공유

- Stack 영역을 따로 할당받음으로서 스레드가 독립적으로 함수를 호출할 수 있고, 독립적 실행 흐름을 가질 수 있다.

→ **프로세스는 자신만의 고유 공간과 자원을 할당받아 사용**하는데 반해, **스레드는 다른 스레드와 공간, 자원을 공유하면서 사용**한다.

## 멀티프로세스

---

하나의 프로그램을 여러개의 프로세스로 구성하여 각 프로세스가 병렬적으로 작업을 수행하는 것을 멀티 프로세스라고 한다.

- **장점**: 안정성. 하나의 프로세스가 잘못 되더라도 프로그램이 동작한다.
- **단점**: 각각 독립된 메모리 영역을 갖고 있어, 작업량 많을 수록 오버헤드 발생. Context Switching으로 인한 성능 저하

### 컨텍스트 스위칭(context switching)

프로세스의 상태 정보를 저장하고 복원하는 일련의 과정. 즉, 동작 중인 프로세스가 대기하면서 해당 프로세스의 상태를 보관하고, 대기하고 있던 다음 순번의 프로세스가 동작하면서 이전에 보관했던 프로세스 상태를 복구하는 과정을 말한다. 실행되는 프로세스의 변경 과정에서 여러 데이터를 저장하고 불러오는 작업이 시스템에 부담을 줄 수 있다. 또, 컨텍스트 스위칭 과정에서 스위칭을 위한 처리에 들어가는 간접적인 처리 시간과 메모리도 소요되는데 이를 컨텍스트 스위칭 오버헤드(overhead)라고 한다. 너무 잦은 컨텍스트 스위칭은 오버헤드를 증가시켜서 효율을 떨어뜨린다.

## 멀티 스레드

---

하나의 응용 프로그램에서 여러 스레드를 구성해 각 스레드가 하나의 작업을 처리하는 것. 스레드들이 공유 메모리를 통해 다수의 작업을 동시에 처리하도록 해줌

- **장점** : 시스템 자원 소모 감소, 실행 속도 향상. 전역 변수와 정적 변수에 대한 자료 공유 가능.
- **단점** : 안전성 문제. 하나의 스레드가 데이터 공간 망가뜨리면, 모든 스레드가 작동 불능 상태

# SSL, TLS, 대칭키, 공개키

### SSL, TLS

- SSL(Secure Sockets Layer)과 TLS (Transport Layer Security) 모두 네트워크 통신에서 보안을 제공하는 프로토콜
- TLS는 SSL보다 보안이 강화된 현대적 버전의 프로토콜이다.

### 대칭키, 비대칭키

- 대칭키 암호화
    - 클라이언트와 서버가 동일한 키를 사용해 암호화/복호화를 진행함
    - 키가 노출되면 매우 위험하지만 연산 속도가 빠름
- 비대칭키 암호화
    - 1개의 쌍으로 구성된 공개키와 개인키를 암호화/복호화 하는데 사용함
    - 키가 노출되어도 비교적 안전하지만 연산 속도가 느림

## SSL을 이용한 통신 과정

컴퓨터와 컴퓨터가 네트워크를 이용해서 통신을 할때는 "악수 -> 전송 -> 세션종료" 3가지 단계가 있다. SSL을 이용한 통신 과정도 이 단계에 따라서 이뤄진다.


**악수 (handshake)**

1. 클라이언트가 서버에 접속한다. 이 단계에서 아래와 같은 정보를 주고받는다.

> 클라이언트 측에서 생성한 랜덤 데이터
> 
> 
> **클라이언트가 지원하는 암호화 방식들:** 상호간에 어떤 암호화 방식을 사용할 것인지에 대한 협상을 위해서 클라이언트 측에서는 자신이 사용할 수 있는 암호화 방식을 전송.
> 
> **세션 아이디:** 이미 SSL 핸드쉐이킹을 했다면 비용과 시간을 절약하기 위해서 기존의 세션을 재활용
> 

2. 서버는 아래와 같은 정보로 응답한다.

> 서버 측에서 생성한 랜덤 데이터
> 
> 
> **서버가 선택한 클라이언트의 암호화 방식:** 클라이언트가 전달한 암호화 방식 중에서 서버 쪽에서도 사용할 수 있는 암호화 방식을 선택해서 클라이언트로 전달.
> 
> **인증서**
> 

3. CA의 개인키로 암호화된 문서임을 보증받기 위해 클라이언트에 내장된 CA의 공개키를 이용해서 인증서를 복호화한다.

클라이언트는 2번 단계를 통해서 받은 서버의 랜덤 데이터와 클라이언트가 생성한 랜덤 데이터를 조합해서 pre master secret이라는 키를 생성하고 서버로부터 받은 인증서 안에 들어있는 공개키를 이용해서 암호화한 pre master key를 서버에 전달.

4. 서버와 클라이언트는 모두 일련의 과정을 거쳐서  pre master secret 값을 master secret 값으로 만든다. master secert 은 session key를 생성하는데 이 session key 값을 이용해서 서버와 클라이언트는 데이터를 대칭키 방식으로 암호화한 후에 주고 받는다.

5. 클라이언트와 서버는 핸드쉐이크 단계의 종료를 서로에게 알린다.

**세션**

대칭키 방식으로 암호화된 데이터를 주고받는다. 공개키 방식은 많은 컴퓨터 파워를 사용하기 때문.

**세션 종료**

데이터의 전송이 끝나면 SSL 통신이 끝났음을 서로에게 알려준다. 이 때 통신에서 사용한 대칭키인 세션키를 폐기한다.


참고 자료

---

https://12bme.tistory.com/80
